(this["webpackJsonpsvd-visualisation"]=this["webpackJsonpsvd-visualisation"]||[]).push([[0],{43:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var r=n(37),i=n.n(r),a=(n(43),n(44),n(15)),s=n(56),c=n(12),o=n(9),u=n(31),x=n.n(u),j=n(5),l=n(24),d=n.n(l),h=function(t,e,n,r){for(var i=[],a=-.5*t;a<=.5*t;a+=t/(r-1))i.push(new j.Vector3(a,.5*e,.5*n)),i.push(new j.Vector3(a,-.5*e,.5*n)),i.push(new j.Vector3(a,.5*e,-.5*n)),i.push(new j.Vector3(a,-.5*e,-.5*n));for(var s=-.5*e;s<=.5*e;s+=e/(r-1))i.push(new j.Vector3(.5*t,s,.5*n)),i.push(new j.Vector3(-.5*t,s,.5*n)),i.push(new j.Vector3(.5*t,s,-.5*n)),i.push(new j.Vector3(-.5*t,s,-.5*n));for(var c=-.5*n;c<=.5*n;c+=n/(r-1))i.push(new j.Vector3(.5*t,.5*e,c)),i.push(new j.Vector3(-.5*t,.5*e,c)),i.push(new j.Vector3(.5*t,-.5*e,c)),i.push(new j.Vector3(-.5*t,-.5*e,c));return i}(10,10,10,5),b=x()((function(t,e){return{matrix:(new j.Matrix3).set(0,1,1,1.41,2,0,0,1,1),setMatrixIndex:function(n,r){var i=e().matrix.elements,a=new j.Matrix3;0===n?a.set(r,i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]):1===n?a.set(i[0],r,i[2],i[3],i[4],i[5],i[6],i[7],i[8]):2===n?a.set(i[0],i[1],r,i[3],i[4],i[5],i[6],i[7],i[8]):3===n?a.set(i[0],i[1],i[2],r,i[4],i[5],i[6],i[7],i[8]):4===n?a.set(i[0],i[1],i[2],i[3],r,i[5],i[6],i[7],i[8]):5===n?a.set(i[0],i[1],i[2],i[3],i[4],r,i[6],i[7],i[8]):6===n?a.set(i[0],i[1],i[2],i[3],i[4],i[5],r,i[7],i[8]):7===n?a.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6],r,i[8]):8===n&&a.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],r),t({matrix:a})},resetMatrix:function(){return t({vectors:h,lastMatrix:(new j.Matrix3).identity()})},applyMatrix:function(n){var r=e().vectors,i=d.a.cloneDeep(r).map((function(t){return t.applyMatrix3(n)}));t({vectors:i,lastMatrix:n})},lastMatrix:(new j.Matrix3).identity(),vectors:h}})),p=n(11),f=n(16),O=n(19),m=n(8),M=["vector","appliedMatrix"],v=function(t){var e=t.vector,n=t.appliedMatrix,r=Object(f.a)(t,M),i=Object(o.useRef)();return Object(o.useEffect)((function(){if(i.current){var t=n.elements;t[1]+t[2]+t[3]+t[5]+t[6]+t[7]===0&&t[0]+t[4]+t[8]!==0?w(e,i.current):g(n,i.current)}}),[i,e,n]),Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({position:e},r),{},{ref:i,children:[Object(m.jsx)("sphereGeometry",{args:[.2,32,32]}),Object(m.jsx)("meshMatcapMaterial",{color:"lightgreen"})]}))},g=function(t,e){var n=Object(c.a)(t.elements,9),r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=n[5],x=n[6],l=n[7],h=n[8],b=new j.Matrix4;b.set(r,s,x,1,i,o,l,1,a,u,h,1,0,0,0,1);var p=new j.Euler;p.setFromRotationMatrix(b,"ZYX");var f=d.a.cloneDeep(e.position),m={x:0,y:0,z:0},M={x:p.x,y:p.y,z:p.z};new O.b(m).to(M,1e3).easing(O.a.Quadratic.Out).onUpdate((function(){var t=new j.Matrix3,n=m.x,r=m.y,i=m.z;t.set(Math.cos(r)*Math.cos(i),-Math.cos(n)*Math.sin(i)+Math.sin(n)*Math.sin(r)*Math.cos(i),Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.sin(r)*Math.cos(i),Math.cos(r)*Math.sin(i),Math.cos(n)*Math.cos(i)+Math.sin(n)*Math.sin(r)*Math.sin(i),-Math.sin(n)*Math.cos(i)+Math.cos(n)*Math.sin(r)*Math.sin(i),-Math.sin(r),Math.sin(n)*Math.cos(r),Math.cos(n)*Math.cos(r));var a=d.a.cloneDeep(f).applyMatrix3(t);e.position.set(a.x,a.y,a.z)})).start()},w=function(t,e){var n=e.position;new O.b(n).to(t).easing(O.a.Quadratic.Out).onUpdate((function(){e.position.set(n.x,n.y,n.z)})).start()},y=function(){var t=b((function(t){return{vectors:t.vectors,matrix:t.lastMatrix}})),e=t.vectors,n=t.matrix,r=Object(o.useState)([]),i=Object(c.a)(r,2),a=i[0],s=i[1];return Object(o.useEffect)((function(){s(e)}),[e]),Object(m.jsx)(m.Fragment,{children:e.map((function(t,e){return Object(m.jsx)(v,{vector:t,appliedMatrix:n,position:a[e]},e)}))})},k=Object(o.memo)((function(){var t=Object(a.c)(),e=t.gl,n=t.scene,r=t.camera,i=Object(o.useCallback)((function(){e.render(n,r)}),[e,n,r]),s=Object(o.useCallback)((function(){requestAnimationFrame(s),O.c(),i()}),[i]);return s(),Object(m.jsx)(m.Fragment,{})})),C=function(){return Object(m.jsxs)(a.a,{dpr:window.devicePixelRatio,style:{height:window.innerHeight,width:window.innerWidth},camera:{isPerspectiveCamera:!0,near:.1,far:1e3,fov:75,rotation:[-.57,.74,.41],position:[9.42,5.59,8.72]},children:[Object(m.jsx)("ambientLight",{}),Object(m.jsx)("gridHelper",{args:[100,100,"white","gray"]}),Object(m.jsx)(y,{}),Object(m.jsx)(k,{}),Object(m.jsx)(s.a,{})]})},V=n(55),F=n(33),$=function(){return Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",gridGap:"0.5rem",zIndex:1},children:[Object(m.jsx)(z,{index:0}),Object(m.jsx)(z,{index:1}),Object(m.jsx)(z,{index:2}),Object(m.jsx)(z,{index:3}),Object(m.jsx)(z,{index:4}),Object(m.jsx)(z,{index:5}),Object(m.jsx)(z,{index:6}),Object(m.jsx)(z,{index:7}),Object(m.jsx)(z,{index:8})]})},z=function(t){var e=t.index,n=b((function(t){return[t.matrix,t.setMatrixIndex]})),r=Object(c.a)(n,2),i=r[0],a=r[1],s=Object(o.useState)(i.elements[e].toString().replace("-","\u2013")),u=Object(c.a)(s,2),x=u[0],j=u[1],l=Object(o.useCallback)((function(t){var n=t.currentTarget.value;isNaN(parseFloat(n))||""===n||a(e,parseFloat(n)),j(n.replace("-","\u2212"))}),[e,a]);return Object(m.jsx)("input",{type:"number",style:{width:"4ch",textAlign:"center",fontFamily:"Katex",color:"lightgreen",backgroundColor:"transparent",fontSize:16,border:"none",outline:"none",margin:"0px auto"},value:x,onChange:l})},A=(n(49),function(t){var e=t.matrix,n=t.transpose,r=b((function(t){return t.applyMatrix})),i=Object(o.useState)(""),a=Object(c.a)(i,2),s=a[0],u=a[1];return Object(o.useEffect)((function(){var t="$$\\begin{bmatrix}";e.elements.forEach((function(e,n){t+=(n+1)%3===0&&n+1!==9?"".concat(e.toFixed(2)," \\\\"):8===n?e.toFixed(2):"".concat(e.toFixed(2)," &")})),u(t+=n?"\\end{bmatrix}^\\top$$":"\\end{bmatrix}$$")}),[e,n]),Object(m.jsx)("div",{className:"matrix",style:{marginTop:n?-4:0},onClick:function(){r(n?e.transpose():e)},children:Object(m.jsx)(F.a,{children:s})})}),S=function(t){var e=t.color,n=void 0===e?"white":e;return Object(m.jsxs)("svg",{version:"1.1",viewBox:"0 0 24 24",width:32,height:32,xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsxs)("g",{stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[Object(m.jsx)("path",{d:"M19.488,4.639v3.536h-3.535h3.535"}),Object(m.jsx)("path",{d:"M19.027,8.175c-1.357,-2.487 -3.995,-4.175 -7.027,-4.175c-4.418,0 -8,3.582 -8,8c0,4.418 3.582,8 8,8c4.418,0 8,-3.582 8,-8"})]}),Object(m.jsx)("path",{fill:"none",d:"M0,0h24v24h-24Z"})]})},D=(n(50),function(){var t=b((function(t){return t.resetMatrix})),e=Object(o.useCallback)((function(){t()}),[t]);return Object(m.jsx)("button",{style:{background:"none",color:"inherit",border:"none",padding:0,font:"inherit",cursor:"pointer",outline:"inherit"},className:"refresh",onClick:e,children:Object(m.jsx)(S,{})})}),E=function(){var t=b((function(t){return t.matrix})).transpose().elements,e=new V.a([[t[0],t[1],t[2]],[t[3],t[4],t[5]],[t[6],t[7],t[8]]]),n=(new j.Matrix3).fromArray(e.leftSingularVectors.to1DArray().map((function(t){return-t}))),r=(new j.Matrix3).fromArray(e.diagonalMatrix.to1DArray()),i=(new j.Matrix3).fromArray(e.rightSingularVectors.to1DArray().map((function(t){return-t})));return Object(m.jsx)("div",{style:{position:"absolute",bottom:0,display:"flex",justifyContent:"center",width:"100%",marginBottom:16},children:Object(m.jsxs)("div",{style:{backgroundColor:"black",borderColor:"gray",borderWidth:2,borderRadius:16,borderStyle:"solid",padding:16},children:[Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(D,{})}),Object(m.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(m.jsx)($,{}),Object(m.jsx)(F.a,{children:"$$=$$"}),Object(m.jsx)(A,{matrix:n}),Object(m.jsx)(A,{matrix:r}),Object(m.jsx)(A,{matrix:i,transpose:!0})]})]})})},I=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C,{}),Object(m.jsx)(E,{})]})};i.a.render(Object(m.jsx)(I,{}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.4eca04fb.chunk.js.map