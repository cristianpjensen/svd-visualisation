(this["webpackJsonpsvd-visualisation"]=this["webpackJsonpsvd-visualisation"]||[]).push([[0],{40:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var r=n(34),i=n.n(r),c=(n(40),n(41),n(15)),o=n(53),a=n(12),s=n(8),l=n(30),u=n.n(l),j=n(5),x=function(t,e,n,r){for(var i=[],c=-.5*t;c<=.5*t;c+=t/(r-1))i.push(new j.Vector3(c,.5*e,.5*n)),i.push(new j.Vector3(c,-.5*e,.5*n)),i.push(new j.Vector3(c,.5*e,-.5*n)),i.push(new j.Vector3(c,-.5*e,-.5*n));for(var o=-.5*e;o<=.5*e;o+=e/(r-1))i.push(new j.Vector3(.5*t,o,.5*n)),i.push(new j.Vector3(-.5*t,o,.5*n)),i.push(new j.Vector3(.5*t,o,-.5*n)),i.push(new j.Vector3(-.5*t,o,-.5*n));for(var a=-.5*n;a<=.5*n;a+=n/(r-1))i.push(new j.Vector3(.5*t,.5*e,a)),i.push(new j.Vector3(-.5*t,.5*e,a)),i.push(new j.Vector3(.5*t,-.5*e,a)),i.push(new j.Vector3(-.5*t,-.5*e,a));return i}(10,10,10,5),h=u()((function(t,e){return{matrix:(new j.Matrix3).set(4,1,0,1,2,0,0,0,1),setMatrixIndex:function(n,r){var i=e().matrix.elements,c=new j.Matrix3;0===n?c.set(r,i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]):1===n?c.set(i[0],r,i[2],i[3],i[4],i[5],i[6],i[7],i[8]):2===n?c.set(i[0],i[1],r,i[3],i[4],i[5],i[6],i[7],i[8]):3===n?c.set(i[0],i[1],i[2],r,i[4],i[5],i[6],i[7],i[8]):4===n?c.set(i[0],i[1],i[2],i[3],r,i[5],i[6],i[7],i[8]):5===n?c.set(i[0],i[1],i[2],i[3],i[4],r,i[6],i[7],i[8]):6===n?c.set(i[0],i[1],i[2],i[3],i[4],i[5],r,i[7],i[8]):7===n?c.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6],r,i[8]):8===n&&c.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],r),t({matrix:c})},resetMatrix:function(){return t({vectors:x,lastMatrix:(new j.Matrix3).fromArray([0,0,0,0,0,0,0,0,0])})},applyMatrix:function(n){var r=e().vectors.map((function(t){var e=(new j.Vector3).copy(t);return e.applyMatrix3(n),e}));t({vectors:r,lastMatrix:n})},lastMatrix:(new j.Matrix3).fromArray([0,0,0,0,0,0,0,0,0]),vectors:x}})),d=n(11),b=n(16),p=n(19),f=n(7),v=["vector","appliedMatrix"],O=function(t){var e=t.vector,n=t.appliedMatrix,r=Object(b.a)(t,v),i=Object(s.useRef)(),c=Object(s.useState)(""),o=Object(a.a)(c,2),l=o[0],u=o[1];return Object(s.useEffect)((function(){var t=w(e);u(t)}),[]),Object(s.useEffect)((function(){if(i.current){var t=n.clone();m(t,e,i.current)}}),[i,e,n]),Object(f.jsxs)("mesh",Object(d.a)(Object(d.a)({},r),{},{ref:i,children:[Object(f.jsx)("sphereGeometry",{args:[.3,32,32]}),Object(f.jsx)("meshMatcapMaterial",{color:l})]}))},m=function(t,e,n){var r=t.clone().invert(),i=t.clone().transpose();M(t.determinant(),1)&&C(r,i)?g(t,e,n):y(e,n)},g=function(t,e,n){var r=t.elements,i=r[0]+r[4]+r[8],c={value:Math.acos((i-1)/2)};if(!M(i,3)){var o=new j.Vector3;o.set(r[7]-r[5],r[2]-r[6],r[3]-r[1]),o.multiplyScalar(1/Math.sqrt((3-i)*(1+i))),o.multiplyScalar(-1);var a=n.position.clone(),s={value:0};new p.b(s).to(c,1e3).easing(p.a.Quadratic.Out).onUpdate((function(){var t=s.value,e=(new j.Matrix3).set(o.x*o.x*(1-Math.cos(t))+Math.cos(t),o.x*o.y*(1-Math.cos(t))-o.z*Math.sin(t),o.x*o.z*(1-Math.cos(t))+o.y*Math.sin(t),o.y*o.x*(1-Math.cos(t))+o.z*Math.sin(t),o.y*o.y*(1-Math.cos(t))+Math.cos(t),o.y*o.z*(1-Math.cos(t))-o.x*Math.sin(t),o.z*o.x*(1-Math.cos(t))-o.y*Math.sin(t),o.z*o.y*(1-Math.cos(t))+o.x*Math.sin(t),o.z*o.z*(1-Math.cos(t))+Math.cos(t)),r=a.clone().applyMatrix3(e);n.position.copy(r)})).onComplete((function(){n.position.copy(e)})).start()}},y=function(t,e){var n=e.position;new p.b(n).to(t).easing(p.a.Quadratic.Out).onUpdate((function(){e.position.set(n.x,n.y,n.z)})).start()},w=function(t){var e=Math.floor((t.x+12)/17*255),n=Math.floor((t.y+12)/17*255),r=Math.floor((t.z+12)/17*255);return"rgb(".concat(e,", ").concat(n,", ").concat(r,")")},M=function(t,e){return Math.abs(t-e)<.001},C=function(t,e){for(var n=t.elements,r=e.elements,i=0;i<9;i++)if(!M(n[i],r[i]))return!1;return!0},k=function(){var t=h((function(t){return{vectors:t.vectors,matrix:t.lastMatrix}})),e=t.vectors,n=t.matrix,r=Object(s.useState)([]),i=Object(a.a)(r,2),c=i[0],o=i[1];return Object(s.useEffect)((function(){o(e)}),[e]),Object(f.jsx)(f.Fragment,{children:e.map((function(t,e){return Object(f.jsx)(O,{vector:t,appliedMatrix:n,position:c[e]},e)}))})},S=Object(s.memo)((function(){var t=Object(c.c)(),e=t.gl,n=t.scene,r=t.camera,i=Object(s.useCallback)((function(){e.render(n,r)}),[e,n,r]),o=Object(s.useCallback)((function(){requestAnimationFrame(o),p.c(),i()}),[i]);return o(),Object(f.jsx)(f.Fragment,{})})),V=function(){return Object(f.jsxs)(c.a,{dpr:window.devicePixelRatio,style:{height:window.innerHeight,width:window.innerWidth},camera:{isPerspectiveCamera:!0,near:.1,far:1e3,fov:75,rotation:[-.57,.74,.41],position:[9.42,5.59,8.72]},children:[Object(f.jsx)("ambientLight",{}),Object(f.jsx)("gridHelper",{args:[100,100,"white","rgb(40, 40, 40)"]}),Object(f.jsx)(k,{}),Object(f.jsx)(S,{}),Object(f.jsx)(o.a,{})]})},z=n(52),A=n(32),F=function(){return Object(f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)",gridGap:"0.5rem",zIndex:1},children:[Object(f.jsx)($,{index:0}),Object(f.jsx)($,{index:1}),Object(f.jsx)($,{index:2}),Object(f.jsx)($,{index:3}),Object(f.jsx)($,{index:4}),Object(f.jsx)($,{index:5}),Object(f.jsx)($,{index:6}),Object(f.jsx)($,{index:7}),Object(f.jsx)($,{index:8})]})},$=function(t){var e=t.index,n=h((function(t){return[t.matrix,t.setMatrixIndex]})),r=Object(a.a)(n,2),i=r[0],c=r[1],o=Object(s.useState)(i.elements[e].toString()),l=Object(a.a)(o,2),u=l[0],j=l[1],x=Object(s.useCallback)((function(t){var n=t.currentTarget.value;isNaN(parseFloat(n))||""===n||c(e,parseFloat(n)),j(n)}),[e,c]);return Object(f.jsx)("input",{type:"number",style:{width:"4ch",textAlign:"center",fontFamily:"Katex",color:"lightgreen",backgroundColor:"transparent",fontSize:16,border:"none",outline:"none",margin:"0px auto"},value:u,onChange:x})},I=function(t){var e=t.matrix,n=t.transpose,r=h((function(t){return t.applyMatrix})),i=Object(s.useState)(""),c=Object(a.a)(i,2),o=c[0],l=c[1];return Object(s.useEffect)((function(){var t="$$\\begin{bmatrix}";e.elements.forEach((function(e,n){t+=(n+1)%3===0&&n+1!==9?"".concat(e.toFixed(2)," \\\\"):8===n?e.toFixed(2):"".concat(e.toFixed(2)," &")})),l(t+=n?"\\end{bmatrix}^\\top$$":"\\end{bmatrix}$$")}),[e,n]),Object(f.jsx)("button",{style:{marginTop:n?-4:0,fontSize:14,display:"flex",alignItems:"center"},onClick:function(){if(n){var t=e.clone();t.transpose(),r(t)}else r(e)},children:Object(f.jsx)(A.a,{children:o})})},L=function(t){var e=t.color,n=void 0===e?"white":e;return Object(f.jsxs)("svg",{version:"1.1",viewBox:"0 0 24 24",width:32,height:32,xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsxs)("g",{stroke:n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[Object(f.jsx)("path",{d:"M19.488,4.639v3.536h-3.535h3.535"}),Object(f.jsx)("path",{d:"M19.027,8.175c-1.357,-2.487 -3.995,-4.175 -7.027,-4.175c-4.418,0 -8,3.582 -8,8c0,4.418 3.582,8 8,8c4.418,0 8,-3.582 8,-8"})]}),Object(f.jsx)("path",{fill:"none",d:"M0,0h24v24h-24Z"})]})},R=function(){var t=h((function(t){return t.resetMatrix})),e=Object(s.useCallback)((function(){t()}),[t]);return Object(f.jsx)("button",{onClick:e,children:Object(f.jsx)(L,{})})},W=function(){var t=h((function(t){return t.matrix})).transpose().elements,e=new z.a([[t[0],t[1],t[2]],[t[3],t[4],t[5]],[t[6],t[7],t[8]]]),n=(new j.Matrix3).fromArray(e.leftSingularVectors.to1DArray()),r=(new j.Matrix3).fromArray(e.diagonalMatrix.to1DArray()),i=(new j.Matrix3).fromArray(e.rightSingularVectors.to1DArray());if(E(n.determinant(),-1)&&E(i.determinant(),-1)){var c=(new j.Matrix3).fromArray([-1,0,0,0,-1,0,0,0,-1]);n.multiply(c),i.multiply(c)}return Object(f.jsx)("div",{style:{position:"absolute",bottom:0,display:"flex",justifyContent:"center",width:"100%",marginBottom:16},children:Object(f.jsxs)("div",{style:{backgroundColor:"black",borderColor:"gray",borderWidth:2,borderRadius:16,borderStyle:"solid",padding:16},children:[Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(f.jsx)(R,{})}),Object(f.jsxs)("div",{style:{alignItems:"center",display:"flex"},children:[Object(f.jsx)(F,{}),Object(f.jsx)(A.a,{children:"$$=$$"}),Object(f.jsx)(I,{matrix:n}),Object(f.jsx)(I,{matrix:r}),Object(f.jsx)(I,{matrix:i,transpose:!0})]})]})})},E=function(t,e){return Math.abs(t-e)<.001},Z=function(t){var e=t.color,n=void 0===e?"white":e;return Object(f.jsx)("svg",{version:"1.1",viewBox:"0 0 24 24",width:32,height:32,xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsxs)("g",{fill:"none",children:[Object(f.jsx)("path",{d:"M0,0h24v24h-24v-24Z"}),Object(f.jsx)("path",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7.496,21h1.504v-1.036c0,0 -0.017,-1.621 0.874,-2.991c-2.031,-0.142 -3.643,-1.954 -3.643,-4.191c0,-0.785 0.298,-1.517 0.809,-2.147l0.052,-1.933c0.013,-0.491 0.504,-0.826 0.966,-0.659l2.075,0.75c0.586,-0.146 1.213,-0.229 1.867,-0.229c0.654,0 1.281,0.083 1.867,0.23l2.075,-0.75c0.462,-0.167 0.953,0.168 0.966,0.659l0.052,1.932c0.51,0.63 0.809,1.362 0.809,2.147c0,2.237 -1.612,4.049 -3.643,4.191c0.891,1.37 0.874,2.991 0.874,2.991v1.036h1.504c2.483,0 4.496,-2.013 4.496,-4.495v-9.009c0,-2.483 -2.013,-4.496 -4.496,-4.496h-9.004c-2.485,0 -4.5,2.015 -4.5,4.5v9.004c0,2.483 2.013,4.496 4.496,4.496"})]})})},B=function(t){var e=t.color,n=void 0===e?"white":e;return Object(f.jsx)("svg",{width:32,height:32,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{d:"M0.877075 7.49972C0.877075 3.84204 3.84222 0.876892 7.49991 0.876892C11.1576 0.876892 14.1227 3.84204 14.1227 7.49972C14.1227 11.1574 11.1576 14.1226 7.49991 14.1226C3.84222 14.1226 0.877075 11.1574 0.877075 7.49972ZM7.49991 1.82689C4.36689 1.82689 1.82708 4.36671 1.82708 7.49972C1.82708 10.6327 4.36689 13.1726 7.49991 13.1726C10.6329 13.1726 13.1727 10.6327 13.1727 7.49972C13.1727 4.36671 10.6329 1.82689 7.49991 1.82689ZM8.24993 10.5C8.24993 10.9142 7.91414 11.25 7.49993 11.25C7.08571 11.25 6.74993 10.9142 6.74993 10.5C6.74993 10.0858 7.08571 9.75 7.49993 9.75C7.91414 9.75 8.24993 10.0858 8.24993 10.5ZM6.05003 6.25C6.05003 5.57211 6.63511 4.925 7.50003 4.925C8.36496 4.925 8.95003 5.57211 8.95003 6.25C8.95003 6.74118 8.68002 6.99212 8.21447 7.27494C8.16251 7.30651 8.10258 7.34131 8.03847 7.37854L8.03841 7.37858C7.85521 7.48497 7.63788 7.61119 7.47449 7.73849C7.23214 7.92732 6.95003 8.23198 6.95003 8.7C6.95004 9.00376 7.19628 9.25 7.50004 9.25C7.8024 9.25 8.04778 9.00601 8.05002 8.70417L8.05056 8.7033C8.05924 8.6896 8.08493 8.65735 8.15058 8.6062C8.25207 8.52712 8.36508 8.46163 8.51567 8.37436L8.51571 8.37433C8.59422 8.32883 8.68296 8.27741 8.78559 8.21506C9.32004 7.89038 10.05 7.35382 10.05 6.25C10.05 4.92789 8.93511 3.825 7.50003 3.825C6.06496 3.825 4.95003 4.92789 4.95003 6.25C4.95003 6.55376 5.19628 6.8 5.50003 6.8C5.80379 6.8 6.05003 6.55376 6.05003 6.25Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"})})},D=function(){var t=Object(s.useState)(!1),e=Object(a.a)(t,2),n=e[0],r=e[1],i=Object(s.useCallback)((function(){r(!0),console.log(1)}),[]),c=Object(s.useCallback)((function(){r(!1)}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("a",{href:"https://github.com/cristianpjensen/svd-visualisation",target:"_blank",rel:"noreferrer",style:{position:"absolute",top:16,left:16},children:Object(f.jsx)(Z,{})}),Object(f.jsx)("button",{style:{position:"absolute",top:16,right:16},onClick:i,children:Object(f.jsx)(B,{})}),n&&Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{style:{position:"absolute",top:0,left:0,display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.1)"},onClick:c,children:Object(f.jsxs)("div",{style:{backgroundColor:"black",zIndex:2,maxWidth:500,width:"100%",maxHeight:500,borderRadius:16,borderColor:"grey",borderStyle:"solid",borderWidth:2,padding:32,boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"},children:[Object(f.jsx)("h2",{style:{textAlign:"center"},children:"Singular Value Decomposition"}),Object(f.jsxs)("div",{style:{textAlign:"justify",fontSize:20},children:[Object(f.jsx)("p",{children:"You can change the matrix input by clicking on the green matrix values and changing them like any other input. The components of the SVD will adjust dynamically to your input. When you have put in your desired matrix, you can click on the matrices one-by-one to apply them to the cube of vectors (visualised as colourful spheres)."}),Object(f.jsx)("p",{children:"Click on the refresh arrow to reset the vectors to their original positions."})]})]})})})]})},T=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(V,{}),Object(f.jsx)(W,{}),Object(f.jsx)(D,{})]})};i.a.render(Object(f.jsx)(T,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.18ba337f.chunk.js.map